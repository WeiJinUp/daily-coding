<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Daily Coding Practice | 算法、设计模式与 Java 特性</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="全面的算法、设计模式和现代Java特性学习资源">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="icon" type="image/png" href="https://stardewvalleywiki.com/mediawiki/images/thumb/5/54/Golden_Walnut.png/32px-Golden_Walnut.png">
  <link rel="alternate icon" href="https://stardewvalleywiki.com/mediawiki/images/thumb/5/54/Golden_Walnut.png/32px-Golden_Walnut.png">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  
  <!-- 星露谷物语风格字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Cabin:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* ==================== 星露谷物语风格主题 ==================== */
    :root {
      /* 星露谷物语温暖配色 */
      --wood-dark: #573b28;         /* 深木色 */
      --wood-medium: #8b6f47;       /* 中木色 */
      --wood-light: #c4a57b;        /* 浅木色 */
      --wood-border: #3d2817;       /* 木质边框 */
      
      --bg-primary: #ede4d6;        /* 主背景 - 温暖的米色 */
      --bg-secondary: #f5efe5;      /* 次级背景 */
      --bg-panel: #faf7f2;          /* 面板背景 */
      --bg-dark: #2d1b00;           /* 深色背景 */
      
      /* 文字颜色 */
      --text-primary: #442926;      /* 主文字 - 深棕色 */
      --text-secondary: #6b5447;    /* 次要文字 */
      --text-light: #f5efe5;        /* 浅色文字（用于深背景） */
      
      /* 主题色 - 星露谷绿色 */
      --green-primary: #7fba00;     /* 主绿色 */
      --green-dark: #5d8a00;        /* 深绿 */
      --green-light: #9fd24a;       /* 浅绿 */
      
      /* 强调色 */
      --gold: #ffd700;              /* 金色 */
      --yellow: #ffee82;            /* 黄色 */
      --blue: #6bb3e0;              /* 蓝色 */
      --red: #d64161;               /* 红色 */
      
      /* 布局 */
      --sidebar-width: 300px;
      
      /* 字体 */
      --font-heading: 'Merriweather', 'PingFang SC', 'Microsoft YaHei', serif;
      --font-body: 'Cabin', 'PingFang SC', 'Microsoft YaHei', sans-serif;
      --font-code: 'Consolas', 'Monaco', monospace;
      
      /* 圆角和尺寸 */
      --radius-small: 6px;
      --radius-medium: 12px;
      --radius-large: 16px;
      --border-width: 3px;
    }

    /* ==================== 全局样式 - 星露谷物语风格 ==================== */
    * {
      box-sizing: border-box;
    }

    html {
      /* 平滑滚动 */
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    body {
      font-family: var(--font-body);
      font-size: 16px;
      color: var(--text-primary);
      background-color: var(--bg-primary);
      /* 木质纹理背景 */
      background-image: 
        repeating-linear-gradient(90deg, 
          transparent, 
          transparent 2px, 
          rgba(139, 111, 71, 0.03) 2px, 
          rgba(139, 111, 71, 0.03) 4px
        );
      line-height: 1.7;
      margin: 0;
      padding: 0;
      overflow: hidden; /* 防止body滚动，只有.content滚动 */
    }
    
    /* 移动端：确保 body 可以滚动（如果需要） */
    @media screen and (max-width: 768px) {
      body {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
        height: 100% !important;
      }
    }
    
    /* 自定义鼠标光标 - 星露谷物语锄头（朝左） */
    /* 使用CSS filter创建翻转效果 */
    body, * {
      cursor: url('https://stardewvalleywiki.com/mediawiki/images/thumb/8/87/Hoe.png/32px-Hoe.png') 24 8, auto;
    }
    
    /* 创建一个翻转的锄头光标（使用CSS变量和伪元素） */
    body::before {
      content: '';
      position: fixed;
      width: 32px;
      height: 32px;
      background-image: url('https://stardewvalleywiki.com/mediawiki/images/thumb/8/87/Hoe.png/32px-Hoe.png');
      background-size: contain;
      background-repeat: no-repeat;
      transform: scaleX(-1);
      pointer-events: none;
      z-index: 99999;
      display: none; /* 默认隐藏，通过JavaScript控制 */
    }
    
    /* 可点击元素使用不同的光标 */
    a, button, input, textarea, select, [role="button"], [onclick], .sidebar-nav a, section.cover a {
      cursor: url('https://stardewvalleywiki.com/mediawiki/images/thumb/8/87/Hoe.png/32px-Hoe.png') 24 8, pointer;
    }
    
    /* 文本选择光标 */
    p, span, div, h1, h2, h3, h4, h5, h6, li, .markdown-section {
      cursor: url('https://stardewvalleywiki.com/mediawiki/images/thumb/8/87/Hoe.png/32px-Hoe.png') 24 8, text;
    }

    /* 标题使用衬线字体 */
    h1, h2, h3, h4, h5, h6 {
      font-family: var(--font-heading);
      font-weight: 700;
      color: var(--wood-dark);
    }

    /* 隐藏顶部导航栏 */
    nav.app-nav {
      display: none !important;
    }

    /* ==================== 侧边栏样式 - 星露谷木质UI ==================== */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      bottom: 0;
      width: var(--sidebar-width);
      background: linear-gradient(180deg, #8b6f47 0%, #6b5447 100%);
      /* 木质纹理 */
      background-image: 
        repeating-linear-gradient(
          90deg,
          rgba(87, 59, 40, 0.3) 0px,
          transparent 1px,
          transparent 2px,
          rgba(87, 59, 40, 0.3) 3px
        ),
        linear-gradient(180deg, #8b6f47 0%, #6b5447 100%);
      border-right: var(--border-width) solid var(--wood-border);
      box-shadow: 
        inset -2px 0 8px rgba(0, 0, 0, 0.3),
        4px 0 12px rgba(0, 0, 0, 0.2);
      overflow-y: auto;
      overflow-x: hidden;
      padding: 24px 0;
      z-index: 20;
      /* 平滑滚动 */
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    /* 侧边栏滚动条 - 木质风格 */
    .sidebar::-webkit-scrollbar {
      width: 12px;
      background: var(--wood-dark);
    }

    .sidebar::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.2);
      border-radius: var(--radius-small);
      margin: 4px 0;
    }

    .sidebar::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, var(--wood-light) 0%, var(--wood-medium) 100%);
      border-radius: var(--radius-small);
      border: 2px solid var(--wood-dark);
      box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.3);
    }

    .sidebar::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(180deg, #d4b897 0%, #a5896b 100%);
    }

    /* 侧边栏标题 - 星露谷木质标牌 */
    .sidebar > h1 {
      margin: 0 16px 24px;
      padding: 16px;
      font-family: var(--font-heading);
      font-size: 20px;
      font-weight: 700;
      color: var(--gold);
      text-align: center;
      background: linear-gradient(135deg, var(--wood-dark) 0%, #4a3520 100%);
      border: var(--border-width) solid var(--wood-border);
      border-radius: var(--radius-medium);
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.3);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      letter-spacing: 1px;
    }

    .sidebar > h1 a {
      color: var(--gold);
      text-decoration: none;
      display: block;
      transition: all 0.3s ease;
    }

    .sidebar > h1 a:hover {
      color: var(--yellow);
      transform: translateY(-2px);
    }

    /* 搜索框 - 星露谷木质输入框 */
    .search {
      margin: 0 16px 20px !important;
      padding: 0 !important;
      border: none;
      background: transparent !important;
      position: relative !important;
    }

    .search input {
      width: 100% !important;
      padding: 12px 16px 12px 44px !important;
      border: var(--border-width) solid var(--wood-border) !important;
      border-radius: var(--radius-medium) !important;
      font-family: var(--font-body) !important;
      font-size: 14px !important;
      outline: none !important;
      background: linear-gradient(135deg, var(--bg-panel) 0%, var(--bg-secondary) 100%) !important;
      background-image: 
        repeating-linear-gradient(90deg, 
          transparent, 
          transparent 2px, 
          rgba(139, 111, 71, 0.05) 2px, 
          rgba(139, 111, 71, 0.05) 4px
        ) !important;
      color: var(--text-primary) !important;
      box-shadow: 
        inset 2px 2px 4px rgba(0,0,0,0.1),
        0 2px 4px rgba(0,0,0,0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
      margin: 0 !important;
      transition: all 0.3s ease !important;
      position: relative !important;
    }

    /* 搜索图标 - 使用星露谷物语图标 */
    .search::before {
      content: '' !important;
      position: absolute !important;
      left: 24px !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      width: 20px !important;
      height: 20px !important;
      background-image: url('https://stardewvalleywiki.com/mediawiki/images/thumb/0/09/Secret_Note_Icon.png/32px-Secret_Note_Icon.png') !important;
      background-size: contain !important;
      background-repeat: no-repeat !important;
      background-position: center !important;
      image-rendering: pixelated !important;
      z-index: 10 !important;
      pointer-events: none !important;
    }

    .search input::placeholder {
      color: var(--wood-dark) !important;
      opacity: 0.8 !important;
      font-weight: 500 !important;
    }

    .search input:focus {
      border-color: var(--green-primary) !important;
      background: linear-gradient(135deg, var(--bg-panel) 0%, var(--bg-secondary) 100%) !important;
      background-image: 
        repeating-linear-gradient(90deg, 
          transparent, 
          transparent 2px, 
          rgba(139, 111, 71, 0.08) 2px, 
          rgba(139, 111, 71, 0.08) 4px
        ) !important;
      box-shadow: 
        inset 2px 2px 4px rgba(0,0,0,0.1),
        0 0 0 3px rgba(127, 186, 0, 0.25),
        0 4px 8px rgba(0,0,0,0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
    }

    /* 搜索结果面板 - 星露谷木质面板 */
    .search .results-panel {
      background: linear-gradient(135deg, var(--bg-panel) 0%, var(--bg-secondary) 100%) !important;
      background-image: 
        repeating-linear-gradient(90deg, 
          transparent, 
          transparent 2px, 
          rgba(139, 111, 71, 0.05) 2px, 
          rgba(139, 111, 71, 0.05) 4px
        ) !important;
      border: var(--border-width) solid var(--wood-border) !important;
      border-radius: var(--radius-medium) !important;
      margin-top: 8px !important;
      max-height: 400px !important;
      overflow-y: auto !important;
      box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1) !important;
    }

    /* 搜索结果项 - 星露谷木质按钮 */
    .search .results-panel a {
      display: block !important;
      padding: 10px 16px !important;
      color: var(--text-primary) !important;
      text-decoration: none !important;
      border-bottom: 1px solid rgba(61, 40, 23, 0.2) !important;
      transition: all 0.2s ease !important;
      font-family: var(--font-body) !important;
    }

    .search .results-panel a:last-child {
      border-bottom: none !important;
    }

    .search .results-panel a:hover {
      background: linear-gradient(135deg, rgba(127, 186, 0, 0.1) 0%, rgba(127, 186, 0, 0.05) 100%) !important;
      color: var(--green-dark) !important;
      transform: translateX(2px) !important;
    }

    /* 搜索关键词高亮 */
    .search .results-panel .search-keyword {
      color: var(--green-primary) !important;
      font-weight: 700 !important;
      background: rgba(127, 186, 0, 0.15) !important;
      padding: 2px 4px !important;
      border-radius: 3px !important;
    }

    /* 搜索结果滚动条 */
    .search .results-panel::-webkit-scrollbar {
      width: 8px !important;
    }

    .search .results-panel::-webkit-scrollbar-track {
      background: rgba(139, 111, 71, 0.1) !important;
      border-radius: 4px !important;
    }

    .search .results-panel::-webkit-scrollbar-thumb {
      background: var(--wood-medium) !important;
      border-radius: 4px !important;
      border: 1px solid var(--wood-border) !important;
    }

    .search .results-panel::-webkit-scrollbar-thumb:hover {
      background: var(--wood-dark) !important;
    }

    /* ==================== 侧边栏导航 ==================== */
    .sidebar-nav {
      padding: 0.5rem 0 2rem;
    }

    /* 完全去除所有列表样式和符号 */
    .sidebar-nav ul,
    .sidebar-nav ol {
      list-style: none !important;
      list-style-type: none !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    .sidebar-nav li {
      margin: 0 !important;
      padding: 0 !important;
      list-style: none !important;
      list-style-type: none !important;
    }

    /* 隐藏所有伪元素（::before, ::marker） */
    .sidebar-nav li::before,
    .sidebar-nav li::marker {
      display: none !important;
      content: none !important;
    }

    /* 确保所有层级都没有符号 */
    .sidebar-nav ul li::before,
    .sidebar-nav ul ul li::before,
    .sidebar-nav ul ul ul li::before {
      display: none !important;
    }

    /* 侧边栏内所有段落和文本都有左边距 */
    .sidebar-nav p {
      padding: 0.6rem 2rem !important;
      margin: 0 !important;
      font-size: 14.5px;
      font-weight: 600;
      color: #aec3d3;
      line-height: 1.5;
    }

    /* 侧边栏内所有直接文本节点的容器 */
    .sidebar-nav > ul > li {
      padding: 0 !important;
      margin: 0 !important;
    }

    /* 分类标题样式（不是链接的文本） */
    .sidebar-nav > ul > li > strong,
    .sidebar-nav > ul > li > span {
      display: block;
      padding: 0.6rem 2rem !important;
      font-size: 14.5px;
      font-weight: 600;
      color: #aec3d3;
      line-height: 1.5;
    }

    /* 一级目录 - 星露谷木质按钮 */
    .sidebar-nav > ul > li > a {
      display: block !important;
      padding: 12px 16px !important;
      margin: 0 16px 8px !important;
      color: var(--text-light) !important;
      font-family: var(--font-body);
      font-size: 15px;
      font-weight: 600;
      text-decoration: none;
      background: linear-gradient(135deg, var(--wood-medium) 0%, var(--wood-dark) 100%);
      border: var(--border-width) solid var(--wood-border);
      border-radius: var(--radius-medium);
      box-shadow: 
        0 3px 6px rgba(0,0,0,0.3),
        inset 0 1px 0 rgba(255,255,255,0.2);
      line-height: 1.5;
      transition: all 0.3s ease;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }

    /* 已访问的链接保持相同颜色 */
    .sidebar-nav > ul > li > a:visited {
      color: var(--text-light) !important;
    }

    .sidebar-nav > ul > li > a:hover {
      color: var(--yellow) !important;
      background: linear-gradient(135deg, #a5896b 0%, var(--wood-medium) 100%);
      transform: translateY(-2px);
      box-shadow: 
        0 5px 10px rgba(0,0,0,0.4),
        inset 0 1px 0 rgba(255,255,255,0.3);
    }

    .sidebar-nav > ul > li > a.active {
      color: var(--gold) !important;
      background: linear-gradient(135deg, var(--green-dark) 0%, var(--green-primary) 100%);
      border-color: var(--green-dark);
      box-shadow: 
        0 2px 4px rgba(0,0,0,0.3),
        inset 0 2px 4px rgba(0,0,0,0.2);
      transform: translateY(1px);
    }

    /* 二级目录 - 星露谷小木牌 */
    .sidebar-nav ul ul a {
      display: block !important;
      padding: 8px 12px 8px 28px !important;
      margin: 0 24px 4px !important;
      color: rgba(255, 255, 255, 0.85) !important;
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 400;
      text-decoration: none;
      background: rgba(0, 0, 0, 0.15);
      border: 2px solid rgba(0, 0, 0, 0.2);
      border-radius: var(--radius-small);
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.2);
      line-height: 1.4;
      transition: all 0.3s ease;
      position: relative;
    }

    /* 已访问的链接保持相同颜色 */
    .sidebar-nav ul ul a:visited {
      color: rgba(255, 255, 255, 0.85) !important;
    }

    .sidebar-nav ul ul a::before {
      content: "▸";
      position: absolute;
      left: 10px;
      color: var(--green-light);
      font-size: 12px;
    }

    .sidebar-nav ul ul a:hover {
      color: var(--yellow) !important;
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.2);
      transform: translateX(3px);
    }

    .sidebar-nav ul ul a.active {
      color: var(--gold) !important;
      background: rgba(127, 186, 0, 0.3);
      border-color: var(--green-light);
      box-shadow: 
        inset 0 1px 3px rgba(0,0,0,0.3),
        0 0 8px rgba(127, 186, 0, 0.3);
    }

    /* 三级目录 - 强制应用样式 */
    .sidebar-nav ul ul ul a {
      padding-left: 4rem !important;
      font-size: 13px;
      color: #aec3d3 !important;
    }

    .sidebar-nav ul ul ul a:visited {
      color: #aec3d3 !important;
    }

    /* 确保所有链接都有左边距 */
    .sidebar-nav a {
      padding-left: 2rem !important;
      color: #aec3d3 !important;
    }

    .sidebar-nav a:visited {
      color: #aec3d3 !important;
    }

    .sidebar-nav ul a {
      padding-left: 2rem !important;
    }

    .sidebar-nav ul ul a {
      padding-left: 3rem !important;
    }

    .sidebar-nav ul ul ul a {
      padding-left: 4rem !important;
    }

    /* 分割线 */
    .sidebar-nav > ul > li > hr {
      margin: 1.5rem 2rem;
      border: 0;
      border-top: 1px solid var(--divider-color);
    }

    /* ==================== 主内容区域 - GitHub Dashboard风格 ==================== */
    .content {
      position: fixed;
      left: var(--sidebar-width);
      right: 0;
      top: 0;
      bottom: 0;
      padding: 0;
      background: var(--bg-primary);
      transition: left 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      overflow-y: auto;
      overflow-x: hidden;
      /* 平滑滚动 */
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
    }

    main {
      display: block;
      position: relative;
      width: 100%;
      max-width: 1012px;
      margin: 0 auto;
      padding: 32px 48px 64px;
      background: var(--bg-panel);
      /* 木质边框效果 */
      border: var(--border-width) solid var(--wood-border);
      border-radius: var(--radius-large);
      box-shadow: 
        0 8px 24px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.5),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
      overflow: visible;
      min-height: calc(100vh - 64px);
      box-sizing: border-box;
    }

    /* ==================== 星露谷物语装饰元素 ==================== */
    
    /* 飘落的叶子装饰 */
    main::before,
    main::after {
      content: '';
      position: absolute;
      width: 40px;
      height: 40px;
      opacity: 0.3;
      pointer-events: none;
    }

    main::before {
      content: '';
      font-size: 24px;
      top: -15px;
      left: -15px;
      animation: float 3s ease-in-out infinite;
    }

    main::after {
      content: '';
      font-size: 24px;
      top: -15px;
      right: -15px;
      animation: float 3s ease-in-out infinite 1.5s;
    }

    /* 浮动动画 */
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-10px) rotate(5deg); }
    }

    /* 内容区域装饰 - 四角装饰 */
    .content::before {
      content: '';
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 32px;
      opacity: 0.4;
      animation: float 4s ease-in-out infinite;
      pointer-events: none;
      z-index: 1;
    }

    /* 侧边栏一级类目图标样式 */
    .sidebar-nav-icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      margin-right: 8px;
      vertical-align: middle;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      image-rendering: pixelated;
      flex-shrink: 0;
    }

    /* 背景农作物图案 */
    .content {
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(127, 186, 0, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 90% 80%, rgba(255, 215, 0, 0.03) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(107, 179, 224, 0.02) 0%, transparent 50%);
    }

    /* ==================== Markdown 内容样式 - 星露谷风格 ==================== */
    .markdown-section {
      padding: 0;
      color: var(--text-primary);
    }

    /* 标题样式 - 星露谷木质标题 */
    .markdown-section h1 {
      margin: 0 0 32px;
      padding: 20px 24px;
      font-family: var(--font-heading);
      font-size: 32px;
      font-weight: 700;
      color: var(--gold);
      line-height: 1.4;
      background: linear-gradient(135deg, var(--wood-dark) 0%, #4a3520 100%);
      border: var(--border-width) solid var(--wood-border);
      border-radius: var(--radius-medium);
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
      position: relative;
      overflow: visible;
    }

    /* H1标题装饰 - 农作物图标 */
    .markdown-section h1 {
      position: relative;
      padding-left: 90px;
      padding-right: 90px;
    }

    .markdown-section h1::before {
      content: '';
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      width: 64px;
      height: 64px;
      background-image: url('https://stardewvalleywiki.com/mediawiki/images/thumb/0/0b/Forester.png/32px-Forester.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      image-rendering: pixelated;
      opacity: 0.7;
      display: block;
    }

    .markdown-section h1::after {
      content: '';
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%) scaleX(-1);
      width: 64px;
      height: 64px;
      background-image: url('https://stardewvalleywiki.com/mediawiki/images/thumb/0/0b/Forester.png/32px-Forester.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      image-rendering: pixelated;
      opacity: 0.7;
      display: block;
    }

    .markdown-section h2 {
      margin: 48px 0 24px;
      padding: 16px 20px 16px 50px;
      font-family: var(--font-heading);
      font-size: 24px;
      font-weight: 700;
      color: var(--text-light);
      line-height: 1.4;
      background: linear-gradient(135deg, var(--green-primary) 0%, var(--green-dark) 100%);
      border: var(--border-width) solid var(--green-dark);
      border-radius: var(--radius-medium);
      box-shadow: 
        0 3px 8px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      position: relative;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    /* h2标题图标样式 */
    .markdown-section h2 .h2-title-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      margin-left: -8px;
    }
    
    .markdown-section h2 .h2-title-icon img {
      width: 32px;
      height: 32px;
      image-rendering: pixelated;
      display: block;
    }

    /* H2标题图标装饰 */
    .markdown-section h2::before {
      content: '';
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 24px;
      animation: sparkle 2s ease-in-out infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 1; transform: translateY(-50%) scale(1); }
      50% { opacity: 0.6; transform: translateY(-50%) scale(1.2); }
    }

    .markdown-section h3 {
      margin: 36px 0 20px;
      padding: 12px 16px;
      font-family: var(--font-heading);
      font-size: 20px;
      font-weight: 700;
      color: var(--wood-dark);
      line-height: 1.5;
      background: linear-gradient(90deg, var(--wood-light) 0%, transparent 100%);
      border-left: 6px solid var(--green-primary);
      border-radius: var(--radius-small);
    }

    .markdown-section h4 {
      margin: 28px 0 16px;
      padding-left: 16px;
      font-family: var(--font-heading);
      font-size: 18px;
      font-weight: 700;
      color: var(--wood-dark);
      border-left: 4px solid var(--wood-medium);
    }

    .markdown-section h5,
    .markdown-section h6 {
      margin: 24px 0 12px;
      font-size: 1.1rem;
      font-weight: 600;
      color: #aec3d3;
    }

    /* 段落 - 星露谷风格 */
    .markdown-section p {
      margin: 16px 0;
      line-height: 1.8;
      color: var(--text-primary);
      font-family: var(--font-body);
      font-size: 16px;
    }

    /* 链接 - 星露谷风格 */
    .markdown-section a {
      color: var(--green-primary);
      font-weight: 600;
      text-decoration: none;
      border-bottom: 2px solid transparent;
      transition: all 0.3s ease;
      padding: 2px 4px;
      border-radius: var(--radius-small);
    }

    .markdown-section a:hover {
      color: var(--green-dark);
      background: rgba(127, 186, 0, 0.1);
      border-bottom-color: var(--green-primary);
      box-shadow: 0 0 0 2px var(--green-primary);
      transition: all 0.2s ease;
    }

    /* 列表 */
    .markdown-section ul,
    .markdown-section ol {
      padding-left: 2rem;
      margin: 1rem 0;
    }

    .markdown-section li {
      margin: 0.6rem 0;
      line-height: 1.7;
      color: var(--text-primary);
    }

    .markdown-section li::marker {
      color: #5fc698;
    }

    /* 行内代码 - 星露谷风格 */
    .markdown-section code {
      color: var(--red);
      padding: 3px 8px;
      margin: 0 2px;
      font-size: 14px;
      background: rgba(214, 65, 97, 0.1);
      border: 1px solid rgba(214, 65, 97, 0.2);
      border-radius: var(--radius-small);
      font-family: var(--font-code);
      font-weight: 600;
    }

    /* 代码块 - 星露谷木质框架 */
    .markdown-section pre {
      position: relative;
      background: linear-gradient(135deg, #2d1b00 0%, #1a0f00 100%);
      border: var(--border-width) solid var(--wood-border);
      border-radius: var(--radius-medium);
      overflow-x: auto;
      margin: 24px 0;
      padding: 20px 24px;
      line-height: 1.7;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    .markdown-section pre code {
      color: var(--green-light);
      padding: 0;
      background-color: transparent;
      border: none;
      font-size: 14px;
      font-family: var(--font-code);
      line-height: 1.7;
      font-weight: normal;
    }

    /* 引用块 - 像素风格 */
    .markdown-section blockquote {
      margin: calc(var(--pixel-unit) * 2) 0;
      padding: calc(var(--pixel-unit) * 2);
      border: 3px solid var(--accent-purple);
      border-left-width: 8px;
    .markdown-section blockquote p {
      margin: 8px 0;
      color: var(--text-primary);
      font-size: 15px;
      font-style: italic;
    }

    /* 表格 - 像素风格 */
    .markdown-section table {
      border-collapse: separate;
      border-spacing: 0;
      width: 100%;
      margin: calc(var(--pixel-unit) * 2) 0;
      display: block;
      overflow-x: auto;
      background-color: var(--bg-primary);
      border: 3px solid var(--border-dark);
      border-radius: 0;
      box-shadow: 4px 4px 0 var(--border-dark);
    }

    .markdown-section table th,
    .markdown-section table td {
      border: 2px solid var(--border-dark);
      padding: calc(var(--pixel-unit) * 1.5);
      text-align: left;
    }

    .markdown-section table th {
      background-color: var(--theme-color);
      font-family: var(--font-pixel);
      font-size: 11px;
      font-weight: normal;
      color: var(--text-primary);
      text-transform: uppercase;
      color: #aec3d3;
    }

    .markdown-section table td {
      color: #aec3d3;
    }

    .markdown-section table tr:nth-child(even) {
      background-color: rgba(255, 255, 255, 0.02);
    }

    .markdown-section table tr:hover {
      background-color: rgba(95, 198, 152, 0.05);
    }

    /* 分隔线 */
    .markdown-section hr {
      margin: 2.5rem 0;
      border: 0;
      border-top: 1px solid var(--divider-color);
    }

    /* 图片 */
    .markdown-section img {
      max-width: 100%;
      border-radius: 8px;
      margin: 1rem 0;
    }

    /* 徽章 */
    .markdown-section .badge {
      display: inline-block;
      font-size: 11px;
      height: 18px;
      line-height: 18px;
      border-radius: 3px;
      padding: 0 6px;
      vertical-align: middle;
      margin-left: 6px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .markdown-section .badge.tip {
      background-color: var(--success-color);
      color: #000;
    }

    .markdown-section .badge.warn {
      background-color: var(--warning-color);
      color: #000;
    }

    .markdown-section .badge.error {
      background-color: var(--error-color);
      color: #fff;
    }

    /* ==================== 提示框 ==================== */
    .markdown-section .tip,
    .markdown-section .warn,
    .markdown-section .danger {
      padding: 1rem 1.5rem;
      border-left: 4px solid;
      margin: 1.5rem 0;
      border-radius: 0 6px 6px 0;
    }

    .markdown-section .tip {
      background-color: rgba(95, 198, 152, 0.1);
      border-color: #5fc698;
    }

    .markdown-section .warn {
      background-color: rgba(232, 184, 126, 0.1);
      border-color: #e8b87e;
    }

    .markdown-section .danger {
      background-color: rgba(244, 135, 113, 0.1);
      border-color: #f48771;
    }

    /* ==================== 代码复制按钮 ==================== */
    .docsify-copy-code-button {
      position: absolute !important;
      right: 10px !important;
      top: 10px !important;
      background: var(--bg-tertiary) !important;
      color: var(--text-primary) !important;
      border: 1px solid var(--border-color) !important;
      border-radius: 4px !important;
      font-size: 12px !important;
      padding: 6px 12px !important;
      cursor: pointer !important;
      transition: all 0.2s !important;
      opacity: 0 !important;
    }

    pre:hover .docsify-copy-code-button {
      opacity: 1 !important;
    }

    .docsify-copy-code-button:hover {
      background: #5fc698 !important;
      color: #181a1b !important;
      border-color: #5fc698 !important;
    }

    /* ==================== 封面页 ==================== */
    section.cover {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      /* 星露谷物语木质背景 - 固定配色 */
      background: linear-gradient(135deg, #ede4d6 0%, #f5efe5 50%, #faf7f2 100%);
      /* 木质纹理 */
      background-image: 
        repeating-linear-gradient(
          90deg,
          rgba(139, 111, 71, 0.05) 0px,
          transparent 1px,
          transparent 2px,
          rgba(139, 111, 71, 0.05) 3px
        ),
        repeating-linear-gradient(
          0deg,
          rgba(87, 59, 40, 0.03) 0px,
          transparent 1px,
          transparent 2px,
          rgba(87, 59, 40, 0.03) 3px
        ),
        linear-gradient(135deg, #ede4d6 0%, #f5efe5 50%, #faf7f2 100%);
      position: relative;
      overflow: hidden;
    }

    section.cover.show {
      display: flex;
    }

    section.cover .cover-main {
      text-align: center;
      max-width: 700px;
      padding: 3rem 2rem;
      background: linear-gradient(135deg, #faf7f2 0%, #f5efe5 100%);
      border: var(--border-width) solid var(--wood-border);
      border-radius: var(--radius-large);
      box-shadow: 
        0 8px 24px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.5),
        inset 0 -1px 0 rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 10;
    }
    
    /* 封面页装饰边框 */
    section.cover .cover-main::before {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      background: linear-gradient(135deg, var(--wood-dark) 0%, var(--wood-medium) 100%);
      border-radius: var(--radius-large);
      z-index: -1;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.3),
        inset 0 2px 4px rgba(255, 255, 255, 0.2);
    }

    section.cover h1 {
      font-size: 3.5rem;
      font-weight: 700;
      color: var(--wood-dark);
      margin: 2rem 0 1rem;
      text-shadow: 
        2px 2px 0 rgba(0, 0, 0, 0.2),
        4px 4px 8px rgba(0, 0, 0, 0.1);
      font-family: var(--font-heading);
      position: relative;
    }
    
    /* 标题装饰 - 星露谷风格 */
    section.cover h1::before {
      content: '';
      position: absolute;
      top: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 4px;
      background: linear-gradient(90deg, transparent, var(--green-primary), transparent);
      border-radius: 2px;
    }

    section.cover h1 small {
      font-size: 1.8rem;
      color: var(--text-secondary);
      font-weight: 400;
      display: block;
      margin-top: 0.5rem;
    }

    section.cover blockquote {
      font-size: 1.3rem;
      color: var(--text-secondary);
      margin: 1.5rem 0;
      border: none;
      background: none;
      font-style: italic;
      font-family: var(--font-body);
    }

    section.cover .cover-main > p:last-child {
      margin-top: 2.5rem;
    }

    section.cover .cover-main > p:last-child a {
      display: inline-block;
      padding: 14px 32px;
      margin: 0.5rem;
      background: linear-gradient(135deg, var(--green-primary) 0%, var(--green-dark) 100%);
      color: var(--text-light);
      font-weight: 600;
      font-family: var(--font-body);
      text-decoration: none;
      border: var(--border-width) solid var(--wood-border);
      border-radius: var(--radius-medium);
      transition: all 0.3s ease;
      box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2);
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      position: relative;
      overflow: hidden;
      font-size: 1.1rem;
    }
    
    /* 按钮3D效果 */
    section.cover .cover-main > p:last-child a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s ease;
    }
    
    section.cover .cover-main > p:last-child a:hover::before {
      left: 100%;
    }

    section.cover .cover-main > p:last-child a:hover {
      background: linear-gradient(135deg, var(--green-light) 0%, var(--green-primary) 100%);
      transform: translateY(-3px);
      box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.4),
        inset 0 -1px 0 rgba(0, 0, 0, 0.3);
    }
    
    section.cover .cover-main > p:last-child a:active {
      transform: translateY(-1px);
      box-shadow: 
        0 2px 8px rgba(0, 0, 0, 0.3),
        inset 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    /* ==================== 进度条 ==================== */
    .progress {
      position: fixed;
      top: 0;
      left: var(--sidebar-width);
      right: 0;
      height: 3px;
      width: 0%;
      background: #5fc698;
      transition: width 0.2s, opacity 0.4s;
      z-index: 999;
    }

    /* ==================== 滚动条样式 - GitHub风格 ==================== */
    /* 主内容区域滚动条 */
    .content::-webkit-scrollbar {
      width: 16px;
      height: 16px;
    }

    .content::-webkit-scrollbar-track {
      background: var(--bg-primary);
      border-left: 1px solid rgba(0, 0, 0, 0.1);
    }

    .content::-webkit-scrollbar-thumb {
      background: rgba(139, 111, 71, 0.3);
      border: 3px solid var(--bg-primary);
      border-radius: 8px;
      transition: background 0.2s ease;
    }

    .content::-webkit-scrollbar-thumb:hover {
      background: rgba(139, 111, 71, 0.5);
    }

    /* 全局滚动条（备用） */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-primary);
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(139, 111, 71, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(139, 111, 71, 0.5);
    }

    /* ==================== 代码高亮优化 ==================== */
    .token.comment,
    .token.prolog,
    .token.doctype,
    .token.cdata {
      color: #6a9955;
    }

    .token.punctuation {
      color: #d4d4d4;
    }

    .token.property,
    .token.tag,
    .token.boolean,
    .token.number,
    .token.constant,
    .token.symbol,
    .token.deleted {
      color: #b5cea8;
    }

    .token.selector,
    .token.attr-name,
    .token.string,
    .token.char,
    .token.builtin,
    .token.inserted {
      color: #ce9178;
    }

    .token.operator,
    .token.entity,
    .token.url,
    .language-css .token.string,
    .style .token.string {
      color: #d4d4d4;
    }

    .token.atrule,
    .token.attr-value,
    .token.keyword {
      color: #c586c0;
    }

    .token.function,
    .token.class-name {
      color: #dcdcaa;
    }

    .token.regex,
    .token.important,
    .token.variable {
      color: #d16969;
    }

    /* ==================== 移动端遮罩层 ==================== */
    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 15;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .sidebar-overlay.show {
      display: block;
      opacity: 1;
    }

    /* ==================== 响应式设计 ==================== */
    @media screen and (max-width: 768px) {
      :root {
        --sidebar-width: 280px;
      }

      /* 移动端：侧边栏默认完全隐藏 */
      .sidebar {
        transition: transform 0.3s ease !important;
        z-index: 20 !important;
        box-shadow: 4px 0 12px rgba(0, 0, 0, 0.3) !important;
        position: fixed !important;
        left: 0 !important;
        width: var(--sidebar-width) !important;
        visibility: visible !important;
        opacity: 1 !important;
      }
      
      /* 移动端：侧边栏默认隐藏（只在没有 close 类时） */
      body:not(.close) .sidebar {
        transform: translateX(-100%) !important;
      }

      /* 侧边栏打开时显示 */
      body.close .sidebar {
        transform: translateX(0) !important;
        visibility: visible !important;
        opacity: 1 !important;
      }
      
      /* 确保侧边栏内容可见 */
      body.close .sidebar .sidebar-nav,
      body.close .sidebar .sidebar-nav ul,
      body.close .sidebar .sidebar-nav li,
      body.close .sidebar .sidebar-nav a {
        visibility: visible !important;
        opacity: 1 !important;
        display: block !important;
      }
      
      /* 确保侧边栏所有子元素可见 */
      body.close .sidebar * {
        visibility: visible !important;
        opacity: 1 !important;
      }
      
      /* 侧边栏标题和搜索框 */
      body.close .sidebar > h1,
      body.close .sidebar .search,
      body.close .sidebar .search input {
        visibility: visible !important;
        opacity: 1 !important;
        display: block !important;
      }

      /* 侧边栏打开时显示遮罩 */
      body.close .sidebar-overlay {
        display: block !important;
        opacity: 1 !important;
      }

      /* 移动端：内容区域占据全屏 */
      .content {
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        transition: transform 0.3s ease !important;
        position: fixed !important;
        overflow-y: auto !important;
        overflow-x: hidden !important;
        -webkit-overflow-scrolling: touch !important;
      }

      /* 侧边栏打开时，内容区域向右移动（但不要移动太多，避免内容被遮挡） */
      body.close .content {
        transform: translateX(var(--sidebar-width)) !important;
        overflow: hidden !important;
      }

      main {
        padding: 20px 16px 48px !important;
        max-width: 100% !important;
        margin: 0 !important;
        border-radius: 0 !important;
        border-left: none !important;
        border-right: none !important;
        width: 100% !important;
        box-sizing: border-box !important;
        overflow-x: hidden !important;
      }

      section.cover h1 {
        font-size: 2rem;
      }
      
      section.cover .cover-main {
        padding: 1.5rem 1rem;
        margin: 0 0.5rem;
      }

      .markdown-section h1 {
        font-size: 1.75rem;
        padding: 16px 20px;
      }

      .markdown-section h2 {
        font-size: 1.35rem;
        padding: 12px 16px 12px 40px;
      }

      .markdown-section h3 {
        font-size: 1.1rem;
      }

      .progress {
        left: 0;
      }

      /* 移动端侧边栏切换按钮更大更明显，扩大点击区域 */
      body button.sidebar-toggle,
      html body button.sidebar-toggle {
        position: fixed !important;
        left: 0 !important;
        bottom: 0 !important;
        width: 64px !important;
        height: 64px !important;
        padding: 8px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        min-width: 64px !important;
        min-height: 64px !important;
        z-index: 9999 !important;
        -webkit-tap-highlight-color: rgba(127, 186, 0, 0.3) !important;
        touch-action: manipulation !important;
        pointer-events: auto !important;
        cursor: pointer !important;
        user-select: none !important;
        -webkit-user-select: none !important;
        /* 扩大点击区域，使用伪元素增加可点击范围 */
        box-sizing: border-box !important;
      }
      
      /* 使用伪元素扩大点击区域 */
      body button.sidebar-toggle::after,
      html body button.sidebar-toggle::after {
        content: '' !important;
        position: absolute !important;
        top: -10px !important;
        left: -10px !important;
        right: -10px !important;
        bottom: -10px !important;
        z-index: -1 !important;
        pointer-events: auto !important;
      }

      /* 确保按钮图标在移动端可见 */
      body button.sidebar-toggle::before,
      html body button.sidebar-toggle::before {
        width: 32px !important;
        height: 32px !important;
      }

      /* 移动端链接和按钮触摸优化 */
      a, button, .sidebar-nav a, section.cover a {
        -webkit-tap-highlight-color: rgba(127, 186, 0, 0.3) !important;
        touch-action: manipulation !important;
        min-height: 44px !important;
        min-width: 44px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
      }

      /* 侧边栏链接在移动端更大 */
      .sidebar-nav > ul > li > a {
        padding: 16px 20px !important;
        font-size: 16px !important;
        min-height: 48px !important;
      }

      .sidebar-nav ul ul a {
        padding: 12px 16px 12px 36px !important;
        font-size: 15px !important;
        min-height: 44px !important;
      }

      /* 搜索框在移动端优化 */
      .search input {
        padding: 14px 16px 14px 48px !important;
        font-size: 16px !important;
        min-height: 48px !important;
      }

      /* 封面页按钮在移动端优化 */
      section.cover .cover-main > p:last-child a {
        padding: 16px 24px !important;
        font-size: 1rem !important;
        min-height: 48px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
      }
    }

    /* 触摸设备优化 */
    @media (hover: none) and (pointer: coarse) {
      /* 移除悬停效果，使用点击效果 */
      .sidebar-nav > ul > li > a:hover,
      .sidebar-nav ul ul a:hover,
      section.cover .cover-main > p:last-child a:hover {
        transform: none;
      }

      .sidebar-nav > ul > li > a:active,
      .sidebar-nav ul ul a:active {
        transform: scale(0.98);
        opacity: 0.8;
      }

      /* 确保所有可点击元素都有足够的触摸区域 */
      a, button {
        min-height: 44px;
        min-width: 44px;
      }
    }

    /* ==================== 选择高亮 ==================== */
    ::selection {
      background-color: rgba(95, 198, 152, 0.3);
      color: #aec3d3;
    }

    ::-moz-selection {
      background-color: rgba(95, 198, 152, 0.3);
      color: #aec3d3;
    }

    /* ==================== 星露谷物语交互效果 ==================== */
    
    /* 悬停时的轻微放大效果（排除已有transform的元素） */
    section.cover .cover-main > p:last-child a:hover {
      transform: translateY(-3px) scale(1.02);
    }
    
    /* 点击时的反馈效果 */
    section.cover .cover-main > p:last-child a:active {
      transform: translateY(-1px) scale(0.98);
    }
    
    /* 链接悬停时的像素风格边框 */
    .markdown-section a:hover {
      box-shadow: 0 0 0 2px var(--green-primary);
      transition: box-shadow 0.2s ease;
    }
    
    /* 按钮点击时的像素风格效果 */
    section.cover .cover-main > p:last-child a:active {
      box-shadow: 
        inset 0 2px 4px rgba(0, 0, 0, 0.3),
        0 0 0 3px var(--green-primary);
    }
    
    /* 侧边栏链接点击效果 */
    .sidebar-nav a:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 
        inset 0 2px 4px rgba(0, 0, 0, 0.4),
        0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    /* 滚动时的像素风格指示器 */
    .content::-webkit-scrollbar-thumb:active {
      background: rgba(139, 111, 71, 0.7);
      box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.3);
    }

    /* ==================== 侧边栏切换按钮 - 星露谷物语风格 ==================== */
    /* Docsify 左下角切换按钮 - 使用最高优先级 */
    body button.sidebar-toggle,
    html body button.sidebar-toggle {
      position: fixed !important;
      left: 0 !important;
      bottom: 0 !important;
      margin: 0 !important;
      margin-left: 0 !important;
      margin-bottom: 0 !important;
      padding: 12px !important;
      min-width: 64px !important;
      min-height: 64px !important;
      width: auto !important;
      height: auto !important;
      background: linear-gradient(135deg, var(--wood-medium) 0%, var(--wood-dark) 100%) !important;
      background-image: 
        repeating-linear-gradient(90deg, 
          transparent, 
          transparent 2px, 
          rgba(87, 59, 40, 0.2) 2px, 
          rgba(87, 59, 40, 0.2) 4px
        ) !important;
      border: var(--border-width) solid var(--wood-border) !important;
      border-radius: var(--radius-medium) !important;
      border-bottom-left-radius: 0 !important;
      border-bottom-right-radius: var(--radius-medium) !important;
      border-top-left-radius: var(--radius-medium) !important;
      border-top-right-radius: var(--radius-medium) !important;
      box-shadow: 
        0 3px 6px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2),
        inset 0 -1px 0 rgba(0, 0, 0, 0.2) !important;
      padding: 10px 12px !important;
      color: var(--text-light) !important;
      transition: all 0.3s ease !important;
      font-family: var(--font-body) !important;
      font-size: 14px !important;
      font-weight: 600 !important;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) !important;
      z-index: 30 !important;
    }

    body button.sidebar-toggle:hover,
    html body button.sidebar-toggle:hover {
      background: linear-gradient(135deg, #a5896b 0%, var(--wood-medium) 100%) !important;
      transform: translateY(-2px) !important;
      box-shadow: 
        0 5px 10px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
    }

    /* 隐藏原有的三条线图标 - 最高优先级 */
    body button.sidebar-toggle .sidebar-toggle-button,
    html body button.sidebar-toggle .sidebar-toggle-button,
    body button.sidebar-toggle .sidebar-toggle-button span,
    html body button.sidebar-toggle .sidebar-toggle-button span,
    body button.sidebar-toggle span,
    html body button.sidebar-toggle span {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      width: 0 !important;
      height: 0 !important;
    }

    /* 替换为星露谷物语图标 - 最高优先级 */
    body button.sidebar-toggle::before,
    html body button.sidebar-toggle::before {
      content: '' !important;
      display: inline-block !important;
      width: 24px !important;
      height: 24px !important;
      background-image: url('https://stardewvalleywiki.com/mediawiki/images/2/26/Speed_w.png') !important;
      background-size: contain !important;
      background-repeat: no-repeat !important;
      background-position: center !important;
      image-rendering: pixelated !important;
      vertical-align: middle !important;
      position: relative !important;
      z-index: 10 !important;
      transition: transform 0.3s ease !important;
      transform: var(--icon-rotate, rotate(0deg)) !important;
    }

    /* 侧边栏收起时（点击后），图标翻转180度 */
    body button.sidebar-toggle[data-sidebar-closed="true"]::before,
    html body button.sidebar-toggle[data-sidebar-closed="true"]::before {
      transform: rotate(180deg) !important;
    }
    
    /* JavaScript动态添加的图标 */
    body button.sidebar-toggle .stardew-toggle-icon {
      transition: transform 0.3s ease !important;
    }

    /* ==================== 点击时锄头图标旋转效果 ==================== */
    /* 点击时的锄头图标 */
    .stardew-cursor-click {
      position: fixed !important;
      width: 32px !important;
      height: 32px !important;
      background-image: url('https://stardewvalleywiki.com/mediawiki/images/thumb/8/87/Hoe.png/32px-Hoe.png') !important;
      background-size: contain !important;
      background-repeat: no-repeat !important;
      background-position: center !important;
      image-rendering: pixelated !important;
      pointer-events: none !important;
      z-index: 99999 !important;
      transform-origin: 0px 32px !important; /* 左下角 */
      transition: transform 0.15s ease-out !important;
      transform: rotate(0deg) !important;
    }

    .stardew-cursor-click.rotating {
      transform: rotate(45deg) !important;
    }
  </style>
</head>
<body>
  <div id="app">正在加载...</div>
  <!-- 移动端侧边栏遮罩层 -->
  <div class="sidebar-overlay" id="sidebar-overlay"></div>
  
  <script>
    window.$docsify = {
      name: '<span style="color: #5fc698; font-weight: 700;">&lt;/&gt; Daily Coding</span>',
      repo: 'https://github.com/WeiJinUp/daily-coding',
      coverpage: true,
      onlyCover: false,
      loadSidebar: true,
      loadNavbar: false,
      auto2top: true,
      maxLevel: 4,
      subMaxLevel: 4,
      mergeNavbar: false,
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md'
      },
      sidebarDisplayLevel: 1,
      relativePath: false,  // 使用绝对路径
      notFoundPage: false,
      
      // 搜索配置
      search: {
        maxAge: 86400000,
        paths: 'auto',
        placeholder: '搜索文档',
        noData: '😞 没有找到结果',
        depth: 4,
        hideOtherSidebarContent: false,
      },
      
      // 代码复制
      copyCode: {
        buttonText: '复制',
        errorText: '失败',
        successText: '✓'
      },
      
      // 分页
      pagination: {
        previousText: '← 上一页',
        nextText: '下一页 →',
        crossChapter: true,
        crossChapterText: true,
      },
      
      // 插件
      plugins: [
        // 移动端初始化：确保侧边栏默认隐藏
        function(hook, vm) {
          function ensureSidebarContentVisible() {
            const sidebar = document.querySelector('.sidebar');
            if (!sidebar) return;
            
            // 确保侧边栏本身可见
            sidebar.style.visibility = 'visible';
            sidebar.style.opacity = '1';
            
            // 确保所有子元素可见
            const allElements = sidebar.querySelectorAll('*');
            allElements.forEach(function(el) {
              const computedStyle = window.getComputedStyle(el);
              // 如果元素被隐藏，强制显示
              if (computedStyle.visibility === 'hidden' || computedStyle.opacity === '0' || computedStyle.display === 'none') {
                el.style.visibility = 'visible';
                el.style.opacity = '1';
                if (computedStyle.display === 'none' && el.tagName !== 'SCRIPT' && el.tagName !== 'STYLE') {
                  el.style.display = '';
                }
              }
            });
            
            // 特别确保导航内容可见
            const sidebarNav = sidebar.querySelector('.sidebar-nav');
            if (sidebarNav) {
              sidebarNav.style.visibility = 'visible';
              sidebarNav.style.opacity = '1';
              sidebarNav.style.display = 'block';
            }
            
            // 确保标题可见
            const sidebarTitle = sidebar.querySelector('h1');
            if (sidebarTitle) {
              sidebarTitle.style.visibility = 'visible';
              sidebarTitle.style.opacity = '1';
              sidebarTitle.style.display = 'block';
            }
            
            // 确保搜索框可见
            const searchBox = sidebar.querySelector('.search');
            if (searchBox) {
              searchBox.style.visibility = 'visible';
              searchBox.style.opacity = '1';
              searchBox.style.display = 'block';
            }
          }
          
          let mobileSidebarInitialized = false;
          
          function initMobileSidebar() {
            // 检测是否为移动设备
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            
            if (isMobile) {
              // 只在首次初始化时执行，避免重复调用导致闪烁
              if (mobileSidebarInitialized) {
                return;
              }
              
              const sidebar = document.querySelector('.sidebar');
              if (sidebar) {
                // 直接设置为隐藏状态，但保持可见性让 Docsify 加载内容
                sidebar.style.transform = 'translateX(-100%)';
                sidebar.style.visibility = 'visible'; // 保持可见，让 Docsify 可以加载内容
                sidebar.style.opacity = '1';
                sidebar.style.position = 'fixed';
                sidebar.style.left = '0';
                sidebar.style.zIndex = '20';
                
                // 确保内容可见（即使侧边栏在屏幕外）
                ensureSidebarContentVisible();
                
                mobileSidebarInitialized = true;
              }
              
              // 确保内容区域占据全屏
              const content = document.querySelector('.content');
              if (content) {
                content.style.left = '0';
                content.style.width = '100%';
                content.style.position = 'fixed';
                content.style.overflowY = 'auto';
                content.style.overflowX = 'hidden';
                content.style.webkitOverflowScrolling = 'touch';
              }
              
              // 确保 body 没有 close 类（侧边栏关闭状态）
              if (document.body.classList.contains('close')) {
                document.body.classList.remove('close');
              }
            } else {
              // 桌面端：重置标志，确保桌面端正常显示
              mobileSidebarInitialized = false;
              
              const sidebar = document.querySelector('.sidebar');
              if (sidebar) {
                sidebar.style.transform = '';
                sidebar.style.visibility = 'visible';
                sidebar.style.opacity = '1';
                ensureSidebarContentVisible();
              }
            }
          }
          
          // 等待 Docsify 完全加载后再初始化
          hook.ready(function() {
            // 只初始化一次，避免闪烁
            setTimeout(initMobileSidebar, 100);
            setTimeout(ensureSidebarContentVisible, 500);
          });
          
          hook.mounted(function() {
            // 只初始化一次，避免闪烁
            setTimeout(initMobileSidebar, 100);
            setTimeout(ensureSidebarContentVisible, 500);
          });
          
          hook.doneEach(function() {
            // 页面切换时只更新内容可见性，不重新初始化
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            if (isMobile) {
              setTimeout(ensureSidebarContentVisible, 300);
            }
          });
          
          // 监听侧边栏打开事件
          hook.afterEach(function() {
            setTimeout(ensureSidebarContentVisible, 200);
          });
          
          // 监听窗口大小变化
          let resizeTimeout;
          window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
              // 重置初始化标志，允许重新初始化
              mobileSidebarInitialized = false;
              initMobileSidebar();
              setTimeout(ensureSidebarContentVisible, 200);
            }, 200);
          });
          
          // 监听 body class 变化（侧边栏打开/关闭）
          const bodyObserver = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
              if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                const isMobile = window.matchMedia('(max-width: 768px)').matches;
                if (isMobile && document.body.classList.contains('close')) {
                  // 侧边栏打开时，确保内容可见
                  setTimeout(ensureSidebarContentVisible, 100);
                  setTimeout(ensureSidebarContentVisible, 300);
                }
              }
            });
          });
          
          bodyObserver.observe(document.body, {
            attributes: true,
            attributeFilter: ['class']
          });
        },
        // 点击时锄头图标旋转效果
        function(hook, vm) {
          let cursorElement = null;
          let isClicking = false;
          let clickStartTime = 0; // 记录点击开始时间

          function createCursorElement() {
            if (cursorElement) return cursorElement;
            
            cursorElement = document.createElement('div');
            cursorElement.className = 'stardew-cursor-click';
            cursorElement.style.display = 'none';
            document.body.appendChild(cursorElement);
            return cursorElement;
          }

          function updateCursorPosition(e) {
            if (!cursorElement) return;
            // 以左下角为基准点，让图标出现在鼠标点击位置的左下角
            // 往左下角移动：left 减小，top 增大
            cursorElement.style.left = (e.clientX - 24) + 'px';
            cursorElement.style.top = (e.clientY - 8) + 'px';
          }

          function handleMouseDown(e) {
            // 🔥 关键修复：如果点击的是链接或按钮，不显示光标效果
            const target = e.target;
            const isClickable = target.tagName === 'A' || 
                               target.tagName === 'BUTTON' || 
                               target.closest('a') || 
                               target.closest('button') ||
                               target.classList.contains('search') ||
                               target.closest('.search');
            
            if (isClickable) {
              // 点击的是可交互元素，不显示光标效果，让浏览器原生处理
              return;
            }
            
            // 记录点击开始时间
            clickStartTime = Date.now();
            
            // 如果正在进行上一次点击动画，立即结束它
            if (isClicking) {
              handleClickEnd();
            }
            
            isClicking = true;
            handleClickStart(e);
            
            // ⚠️ 重要：不要阻止事件传播，让链接可以正常点击
            // 不调用 e.preventDefault() 或 e.stopPropagation()
          }

          function handleMouseUp(e) {
            if (!isClicking) return;
            
            // 计算点击持续时间
            const clickDuration = Date.now() - clickStartTime;
            
            // 对于快速点击（< 150ms），立即结束动画
            // 对于长按，保持动画时间
            if (clickDuration < 150) {
              // 快速点击：立即结束
              handleClickEnd();
            } else {
              // 正常点击：稍作延迟
              setTimeout(handleClickEnd, 50);
            }
            
            // ⚠️ 重要：不要阻止事件传播
          }

          function handleTouchStart(e) {
            // 🔥 关键修复：触摸事件也要检查是否是可交互元素
            const target = e.target;
            const isClickable = target.tagName === 'A' || 
                               target.tagName === 'BUTTON' || 
                               target.closest('a') || 
                               target.closest('button') ||
                               target.classList.contains('search') ||
                               target.closest('.search');
            
            if (isClickable) {
              // 点击的是可交互元素，不显示光标效果
              return;
            }
            
            // 触摸事件处理
            // 记录触摸开始时间
            clickStartTime = Date.now();
            
            // 如果正在进行上一次点击动画，立即结束它
            if (isClicking) {
              handleClickEnd();
            }
            
            isClicking = true;
            const touch = e.touches[0];
            const touchEvent = {
              clientX: touch.clientX,
              clientY: touch.clientY
            };
            handleClickStart(touchEvent);
          }

          function handleClickStart(e) {
            
            // 隐藏鼠标光标 - 使用 !important 覆盖 CSS
            document.body.style.setProperty('cursor', 'none', 'important');
            // 同时在 html 元素上也设置
            document.documentElement.style.setProperty('cursor', 'none', 'important');
            // 在所有子元素上也设置
            const allElements = document.querySelectorAll('*');
            allElements.forEach(function(el) {
              el.style.setProperty('cursor', 'none', 'important');
            });
            
            const cursor = createCursorElement();
            if (!cursor) {
              isClicking = false;
              document.body.style.cursor = '';
              return;
            }
            
            // 更新位置
            updateCursorPosition(e);
            
            // 确保元素显示 - 使用 !important 级别的内联样式
            cursor.style.setProperty('display', 'block', 'important');
            cursor.style.setProperty('visibility', 'visible', 'important');
            cursor.style.setProperty('opacity', '1', 'important');
            cursor.style.setProperty('z-index', '99999', 'important');
            cursor.style.setProperty('position', 'fixed', 'important');
            // 以左下角为基准点，让图标出现在鼠标点击位置的左下角
            // 往左下角移动：left 减小，top 增大
            cursor.style.setProperty('left', (e.clientX - 24) + 'px', 'important');
            cursor.style.setProperty('top', (e.clientY - 8) + 'px', 'important');
            cursor.style.setProperty('width', '32px', 'important');
            cursor.style.setProperty('height', '32px', 'important');
            cursor.style.setProperty('background-image', 'url("https://stardewvalleywiki.com/mediawiki/images/thumb/8/87/Hoe.png/32px-Hoe.png")', 'important');
            cursor.style.setProperty('background-size', 'contain', 'important');
            cursor.style.setProperty('background-repeat', 'no-repeat', 'important');
            cursor.style.setProperty('background-position', 'center', 'important');
            cursor.style.setProperty('image-rendering', 'pixelated', 'important');
            cursor.style.setProperty('transform-origin', '0px 32px', 'important'); // 左下角
            cursor.style.setProperty('transition', 'transform 0.15s ease-out', 'important');
            cursor.style.setProperty('transform', 'rotate(0deg)', 'important');
            
            // 移除旋转类（如果存在）
            cursor.classList.remove('rotating');
            
            // 强制重排，确保显示
            void cursor.offsetWidth;
            
            // 触发旋转动画（延迟确保元素已显示）
            setTimeout(function() {
              if (cursor && isClicking) {
                cursor.classList.add('rotating');
                // 同时直接设置 transform 样式
                cursor.style.setProperty('transform', 'rotate(45deg)', 'important');
              }
            }, 10);
          }

          function handleTouchEnd(e) {
            if (!isClicking) return;
            
            // 计算触摸持续时间
            const touchDuration = Date.now() - clickStartTime;
            
            // 对于快速点击（< 150ms），立即结束动画
            if (touchDuration < 150) {
              handleClickEnd();
            } else {
              setTimeout(handleClickEnd, 50);
            }
          }

          function handleClickEnd() {
            if (!isClicking) return;
            
            // 立即重置 isClicking 标志，允许下次点击
            // 这样可以支持快速连续点击
            isClicking = false;
            
            // 恢复鼠标光标 - 移除所有元素的 cursor 样式
            document.body.style.removeProperty('cursor');
            document.documentElement.style.removeProperty('cursor');
            const allElements = document.querySelectorAll('*');
            allElements.forEach(function(el) {
              el.style.removeProperty('cursor');
            });
            
            if (cursorElement) {
              cursorElement.classList.remove('rotating');
              // 同时移除 transform 样式
              cursorElement.style.setProperty('transform', 'rotate(0deg)', 'important');
              // 延迟隐藏，让动画完成
              setTimeout(function() {
                if (cursorElement && !isClicking) {
                  cursorElement.style.setProperty('display', 'none', 'important');
                  cursorElement.style.setProperty('visibility', 'hidden', 'important');
                  cursorElement.style.setProperty('opacity', '0', 'important');
                }
              }, 150); // 缩短延迟时间，从 200ms 改为 150ms
            }
          }

          function handleMouseMove(e) {
            if (isClicking && cursorElement) {
              updateCursorPosition(e);
            }
          }

          function handleTouchMove(e) {
            if (isClicking && cursorElement && e.touches.length > 0) {
              const touch = e.touches[0];
              const touchEvent = {
                clientX: touch.clientX,
                clientY: touch.clientY
              };
              updateCursorPosition(touchEvent);
            }
          }

          // 初始化函数
          function initCursorEffect() {
            createCursorElement();
            // 移除旧的事件监听器（如果存在）
            document.removeEventListener('mousedown', handleMouseDown, true);
            document.removeEventListener('mouseup', handleMouseUp, true);
            document.removeEventListener('mousemove', handleMouseMove, true);
            document.removeEventListener('touchstart', handleTouchStart, true);
            document.removeEventListener('touchend', handleTouchEnd, true);
            document.removeEventListener('touchmove', handleTouchMove, true);
            
            // 添加新的事件监听器
            // ⚠️ 关键修复：不使用 capture: true，改用冒泡阶段（默认）
            // 这样链接的点击事件可以先被处理，光标效果作为装饰不干扰交互
            document.addEventListener('mousedown', handleMouseDown, false);
            document.addEventListener('mouseup', handleMouseUp, false);
            document.addEventListener('mousemove', handleMouseMove, { passive: true });
            document.addEventListener('touchstart', handleTouchStart, { passive: true });
            document.addEventListener('touchend', handleTouchEnd, { passive: true });
            document.addEventListener('touchmove', handleTouchMove, { passive: true });
          }
          
          // 在多个时机初始化
          hook.mounted(function() {
            setTimeout(initCursorEffect, 100);
          });
          
          // 页面加载完成后也初始化
          if (document.readyState === 'complete') {
            setTimeout(initCursorEffect, 200);
          } else {
            window.addEventListener('load', function() {
              setTimeout(initCursorEffect, 200);
            });
          }
          
          // 立即尝试初始化（如果DOM已准备好）
          if (document.body) {
            setTimeout(initCursorEffect, 300);
          }
          
        },
        // 移动端侧边栏遮罩层处理
        function(hook, vm) {
          function closeSidebar() {
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            if (!isMobile) return;
            
            // 立即关闭侧边栏
            if (document.body.classList.contains('close')) {
              // 第1步：立即移除 close 类
              document.body.classList.remove('close');
              
              // 第2步：强制隐藏侧边栏（包括框架）
              const sidebar = document.querySelector('.sidebar');
              if (sidebar) {
                sidebar.style.setProperty('transform', 'translateX(-100%)', 'important');
                sidebar.style.setProperty('visibility', 'hidden', 'important');
                sidebar.style.setProperty('opacity', '0', 'important');
              }
              
              // 第3步：强制隐藏遮罩层
              const overlay = document.getElementById('sidebar-overlay');
              if (overlay) {
                overlay.classList.remove('show');
                overlay.style.setProperty('display', 'none', 'important');
                overlay.style.setProperty('opacity', '0', 'important');
                overlay.style.setProperty('visibility', 'hidden', 'important');
              }
              
              // 第4步：更新图标状态
              const toggleButton = document.querySelector('button.sidebar-toggle');
              if (toggleButton) {
                const icon = toggleButton.querySelector('.stardew-toggle-icon');
                if (icon) {
                  icon.style.transform = 'rotate(0deg)';
                }
                toggleButton.setAttribute('data-sidebar-closed', 'true');
                toggleButton.style.setProperty('--icon-rotate', 'rotate(180deg)');
              }
              
              // 第5步：二次检查，确保 close 类被移除（防止其他代码重新添加）
              requestAnimationFrame(function() {
                if (document.body.classList.contains('close')) {
                  document.body.classList.remove('close');
                }
              });
            }
          }
          
          function initSidebarOverlay() {
            const overlay = document.getElementById('sidebar-overlay');
            if (!overlay) return;

            // 点击遮罩层关闭侧边栏
            overlay.addEventListener('click', function(e) {
              e.preventDefault();
              e.stopPropagation();
              closeSidebar();
            });

            // 触摸事件支持
            overlay.addEventListener('touchstart', function(e) {
              e.preventDefault();
            }, { passive: false });

            overlay.addEventListener('touchend', function(e) {
              e.preventDefault();
              e.stopPropagation();
              closeSidebar();
            }, { passive: false });
          }
          
          // 移动端：点击内容区域关闭侧边栏
          let contentClickHandler = null;
          let contentTouchHandler = null;
          
          function handleContentClick(e) {
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            if (!isMobile) return;
            
            // 如果侧边栏是打开的，点击内容区域应该关闭它
            if (document.body.classList.contains('close')) {
              const target = e.target;
              
              // 检查点击的是否在侧边栏内（绝对不能关闭）
              if (target.closest('.sidebar')) {
                return; // 点击侧边栏区域，不关闭，也不阻止事件
              }
              
              // 检查点击的是否是遮罩层（应该关闭，但遮罩层有自己的处理逻辑）
              if (target.closest('.sidebar-overlay')) {
                return; // 遮罩层有自己的处理逻辑
              }
              
              // 检查点击的是否是切换按钮（应该关闭，但按钮有自己的处理逻辑）
              if (target.closest('.sidebar-toggle')) {
                return; // 按钮有自己的处理逻辑
              }
              
              // 检查点击的是否是链接或其他交互元素
              const isInteractive = target.tagName === 'A' || 
                                   target.tagName === 'BUTTON' || 
                                   target.tagName === 'INPUT' ||
                                   target.tagName === 'TEXTAREA' ||
                                   target.tagName === 'SELECT' ||
                                   target.closest('a') || 
                                   target.closest('button') ||
                                   target.closest('input') ||
                                   target.closest('textarea') ||
                                   target.closest('select');
              
              // 如果不是交互元素，关闭侧边栏（不阻止事件，让其他元素正常响应）
              if (!isInteractive) {
                closeSidebar();
              }
            }
          }
          
          function handleContentTouch(e) {
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            if (!isMobile) return;
            
            // 如果侧边栏是打开的，触摸内容区域应该关闭它
            if (document.body.classList.contains('close')) {
              const target = e.target;
              
              // 检查点击的是否在侧边栏内（绝对不能关闭）
              if (target.closest('.sidebar')) {
                return; // 点击侧边栏区域，不关闭
              }
              
              // 检查点击的是否是遮罩层（应该关闭，但遮罩层有自己的处理逻辑）
              if (target.closest('.sidebar-overlay')) {
                return; // 遮罩层有自己的处理逻辑
              }
              
              // 检查点击的是否是切换按钮（应该关闭，但按钮有自己的处理逻辑）
              if (target.closest('.sidebar-toggle')) {
                return; // 按钮有自己的处理逻辑
              }
              
              const isInteractive = target.tagName === 'A' || 
                                   target.tagName === 'BUTTON' || 
                                   target.tagName === 'INPUT' ||
                                   target.tagName === 'TEXTAREA' ||
                                   target.tagName === 'SELECT' ||
                                   target.closest('a') || 
                                   target.closest('button') ||
                                   target.closest('input') ||
                                   target.closest('textarea') ||
                                   target.closest('select');
              
              if (!isInteractive) {
                // 立即关闭，不延迟
                if (document.body.classList.contains('close')) {
                  closeSidebar();
                }
              }
            }
          }
          
          function initContentClickHandler() {
            const isMobile = window.matchMedia('(max-width: 768px)').matches;
            if (!isMobile) return;
            
            const content = document.querySelector('.content');
            if (!content) return;
            
            // 移除旧的事件监听器（如果存在）
            if (contentClickHandler) {
              content.removeEventListener('click', contentClickHandler);
            }
            if (contentTouchHandler) {
              content.removeEventListener('touchstart', contentTouchHandler);
            }
            
            // 创建新的事件处理器
            contentClickHandler = handleContentClick;
            contentTouchHandler = handleContentTouch;
            
            // 添加新的事件监听器（不使用 capture 模式，避免拦截正常点击）
            content.addEventListener('click', contentClickHandler, false);
            content.addEventListener('touchstart', contentTouchHandler, { passive: true });
          }

          hook.mounted(function() {
            setTimeout(initSidebarOverlay, 100);
            setTimeout(initContentClickHandler, 200);
          });
          
          hook.doneEach(function() {
            setTimeout(initSidebarOverlay, 100);
            setTimeout(initContentClickHandler, 200);
          });
        },
        // 优化左下角侧边栏切换按钮
        function(hook, vm) {
          function styleToggleButton() {
            const toggleButton = document.querySelector('button.sidebar-toggle');
            if (toggleButton && !toggleButton.hasAttribute('data-stardew-styled')) {
              toggleButton.setAttribute('data-stardew-styled', 'true');
              
              // 移动端触摸优化
              toggleButton.style.setProperty('-webkit-tap-highlight-color', 'rgba(127, 186, 0, 0.3)', 'important');
              toggleButton.style.setProperty('touch-action', 'manipulation', 'important');
              toggleButton.style.setProperty('pointer-events', 'auto', 'important');
              toggleButton.style.setProperty('cursor', 'pointer', 'important');
              toggleButton.style.setProperty('user-select', 'none', 'important');
              toggleButton.style.setProperty('-webkit-user-select', 'none', 'important');
              
              // 强制应用样式（扩大点击区域）
              toggleButton.style.cssText += `
                position: fixed !important;
                left: 0 !important;
                bottom: 0 !important;
                margin: 0 !important;
                margin-left: 0 !important;
                margin-bottom: 0 !important;
                background: linear-gradient(135deg, #8b6f47 0%, #573b28 100%) !important;
                background-image: repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(87, 59, 40, 0.2) 2px, rgba(87, 59, 40, 0.2) 4px) !important;
                border: 3px solid #3d2817 !important;
                border-radius: 12px !important;
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 12px !important;
                border-top-left-radius: 12px !important;
                border-top-right-radius: 12px !important;
                box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2), inset 0 -1px 0 rgba(0, 0, 0, 0.2) !important;
                padding: 12px !important;
                min-width: 64px !important;
                min-height: 64px !important;
                color: #f5efe5 !important;
                font-family: 'Cabin', 'PingFang SC', 'Microsoft YaHei', sans-serif !important;
                font-size: 14px !important;
                font-weight: 600 !important;
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) !important;
                z-index: 9999 !important;
                pointer-events: auto !important;
                cursor: pointer !important;
                user-select: none !important;
                -webkit-user-select: none !important;
                box-sizing: border-box !important;
              `;
              
              // 隐藏原有的三条线
              const toggleButtonDiv = toggleButton.querySelector('.sidebar-toggle-button');
              if (toggleButtonDiv) {
                toggleButtonDiv.style.display = 'none';
                toggleButtonDiv.style.visibility = 'hidden';
              }
              
              const spans = toggleButton.querySelectorAll('span');
              spans.forEach(function(span) {
                span.style.display = 'none';
                span.style.visibility = 'hidden';
              });
              
              // 添加图标
              if (!toggleButton.querySelector('.stardew-toggle-icon')) {
                const icon = document.createElement('span');
                icon.className = 'stardew-toggle-icon';
                icon.style.cssText = `
                  display: inline-block !important;
                  width: 24px !important;
                  height: 24px !important;
                  background-image: url('https://stardewvalleywiki.com/mediawiki/images/2/26/Speed_w.png') !important;
                  background-size: contain !important;
                  background-repeat: no-repeat !important;
                  background-position: center !important;
                  image-rendering: pixelated !important;
                  vertical-align: middle !important;
                  transition: transform 0.3s ease !important;
                `;
                toggleButton.appendChild(icon);
              }
              
              // 更新图标方向函数
              function updateIconDirection() {
                // 如果正在点击侧边栏，不更新图标状态
                if (isClickingInSidebar) {
                  return;
                }
                
                const sidebar = document.querySelector('.sidebar');
                const icon = toggleButton.querySelector('.stardew-toggle-icon');
                
                if (!sidebar) return;
                
                // 只检查 body 是否有 close 类（这是唯一可靠的判断依据）
                const isClosed = document.body.classList.contains('close');
                
                // 移动端：侧边栏打开时，图标应该旋转
                // 桌面端：侧边栏打开时（body.close），图标也应该旋转
                  if (isClosed) {
                    toggleButton.setAttribute('data-sidebar-closed', 'true');
                    if (icon) {
                      icon.style.transform = 'rotate(180deg)';
                    }
                    toggleButton.style.setProperty('--icon-rotate', 'rotate(180deg)');
                  } else {
                    toggleButton.setAttribute('data-sidebar-closed', 'false');
                    if (icon) {
                      icon.style.transform = 'rotate(0deg)';
                    }
                    toggleButton.style.setProperty('--icon-rotate', 'rotate(0deg)');
                }
              }
              
              // 检测是否为移动设备
              const isMobile = window.matchMedia('(max-width: 768px)').matches;
              
              // 更新 UI 状态的函数（不触发切换，只更新显示，立即执行）
              function updateSidebarUI() {
                const isClosed = document.body.classList.contains('close');
                const overlay = document.getElementById('sidebar-overlay');
                
                // 立即更新遮罩层（仅移动端）
                if (overlay && isMobile) {
                  if (isClosed) {
                    overlay.classList.add('show');
                  } else {
                    overlay.classList.remove('show');
                  }
                }
                
                // 立即更新图标方向，不延迟
                updateIconDirection();
              }
              
              // 移动端：手动切换侧边栏（立即响应，无延迟）
              function toggleSidebarMobile() {
                const sidebar = document.querySelector('.sidebar');
                const isCurrentlyClosed = document.body.classList.contains('close');
                
                if (isCurrentlyClosed) {
                  // 当前侧边栏是打开的，需要关闭
                  const isMobile = window.matchMedia('(max-width: 768px)').matches;
                  if (!isMobile) {
                    return;
                  }
                  
                  // 第1步：立即移除 close 类
                  document.body.classList.remove('close');
                  
                  // 第2步：强制隐藏侧边栏（包括框架）
                  if (sidebar) {
                    sidebar.style.setProperty('transform', 'translateX(-100%)', 'important');
                    sidebar.style.setProperty('visibility', 'hidden', 'important');
                    sidebar.style.setProperty('opacity', '0', 'important');
                  }
                  
                  // 第3步：强制隐藏遮罩层
                  const overlay = document.getElementById('sidebar-overlay');
                  if (overlay) {
                    overlay.classList.remove('show');
                    overlay.style.setProperty('display', 'none', 'important');
                    overlay.style.setProperty('opacity', '0', 'important');
                    overlay.style.setProperty('visibility', 'hidden', 'important');
                  }
                  
                  // 第4步：更新图标状态
                  const toggleButton = document.querySelector('button.sidebar-toggle');
                  if (toggleButton) {
                    toggleButton.setAttribute('data-sidebar-closed', 'true');
                    toggleButton.style.setProperty('--icon-rotate', 'rotate(180deg)');
                  }
                  
                  // 第5步：二次检查，确保 close 类被移除
                  requestAnimationFrame(function() {
                    if (document.body.classList.contains('close')) {
                      document.body.classList.remove('close');
                    }
                  });
                } else {
                  // 当前侧边栏是关闭的，需要打开
                  document.body.classList.add('close');
                  
                  if (sidebar) {
                    // 立即确保侧边栏可见
                    sidebar.style.transform = 'translateX(0)';
                    sidebar.style.visibility = 'visible';
                    sidebar.style.opacity = '1';
                    sidebar.style.display = '';
                    
                    // 确保侧边栏内容可见
                    const sidebarNav = sidebar.querySelector('.sidebar-nav');
                    if (sidebarNav) {
                      sidebarNav.style.visibility = 'visible';
                      sidebarNav.style.opacity = '1';
                      sidebarNav.style.display = 'block';
                    }
                    
                    // 确保所有链接可见
                    const allLinks = sidebar.querySelectorAll('a');
                    allLinks.forEach(function(link) {
                      link.style.visibility = 'visible';
                      link.style.opacity = '1';
                      link.style.display = '';
                    });
                    
                    // 确保所有列表项可见
                    const allListItems = sidebar.querySelectorAll('li');
                    allListItems.forEach(function(li) {
                      li.style.visibility = 'visible';
                      li.style.opacity = '1';
                      li.style.display = '';
                    });
                    
                    // 异步检查内容（不阻塞主流程）
                    requestAnimationFrame(function() {
                      const sidebarNav = sidebar.querySelector('.sidebar-nav');
                      if (!sidebarNav || sidebarNav.children.length === 0) {
                        if (window.Docsify && window.Docsify.getSidebar) {
                          const vm = window.Docsify.getSidebar();
                          if (vm && vm.sidebar) {
                            vm.sidebar.loadSidebar();
                          }
                        }
                      }
                    });
                  }
                  
                  // 立即更新 UI 状态
                  updateSidebarUI();
                }
              }
              
              // 桌面端：让 Docsify 原生处理，只更新 UI
              // 移动端：需要手动处理，支持轻击
              if (isMobile) {
                // 移动端：轻击检测（类似 Mac 触控板轻击）
                let touchStartTime = 0;
                let touchStartX = 0;
                let touchStartY = 0;
                let hasMoved = false;
                
                toggleButton.addEventListener('touchstart', function(e) {
                  const touch = e.touches[0];
                  touchStartTime = Date.now();
                  touchStartX = touch.clientX;
                  touchStartY = touch.clientY;
                  hasMoved = false;
                }, { passive: true });
                
                toggleButton.addEventListener('touchmove', function(e) {
                  // 如果移动距离超过阈值，取消轻击
                  if (e.touches.length > 0 && touchStartTime > 0) {
                    const touch = e.touches[0];
                    const moveX = Math.abs(touch.clientX - touchStartX);
                    const moveY = Math.abs(touch.clientY - touchStartY);
                    // 如果移动超过 15px，不算轻击
                    if (moveX > 15 || moveY > 15) {
                      hasMoved = true;
                    }
                  }
                }, { passive: true });
                
                toggleButton.addEventListener('touchend', function(e) {
                  if (touchStartTime === 0) return;
                  
                  const touchEndTime = Date.now();
                  const touchDuration = touchEndTime - touchStartTime;
                  
                  // 轻击检测：时间小于 400ms，移动距离小于 15px（更宽松的条件）
                  if (touchDuration < 400 && !hasMoved) {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleSidebarMobile();
                  }
                  
                  // 重置
                  touchStartTime = 0;
                  hasMoved = false;
                }, { passive: false });
                
                // 移动端：点击事件也处理（防止某些设备同时触发）
                toggleButton.addEventListener('click', function(e) {
                  e.preventDefault();
                  e.stopPropagation();
                  toggleSidebarMobile();
                });
              } else {
                // 桌面端：让 Docsify 原生处理切换，我们只更新 UI
                // 扩大鼠标点击区域
                toggleButton.style.cursor = 'pointer';
                toggleButton.style.padding = '12px';
                
                // 监听点击事件，但不阻止默认行为，让 Docsify 原生处理切换
                // 我们只负责更新自定义 UI（图标方向等）
                toggleButton.addEventListener('click', function(e) {
                  // 不阻止默认行为，让 Docsify 处理切换
                  // 使用 setTimeout 确保在 Docsify 处理后再更新 UI
                  setTimeout(function() {
                    updateSidebarUI();
                  }, 0);
                }, false);
                
                // 扩大鼠标悬停区域
                toggleButton.addEventListener('mouseenter', function() {
                  this.style.cursor = 'pointer';
                });
                
                // 确保按钮可点击
                toggleButton.style.pointerEvents = 'auto';
                toggleButton.style.cursor = 'pointer';
              }
              
              // 防止侧边栏内点击时更新图标状态和关闭侧边栏
              let isClickingInSidebar = false;
              let sidebarClickTimeout = null;
              
              // 监听侧边栏内的点击事件，阻止事件冒泡（但不阻止链接跳转）
              const sidebar = document.querySelector('.sidebar');
              if (sidebar) {
                // 阻止侧边栏内的点击事件冒泡到内容区域，但允许链接正常工作
                // 不使用 capture 模式，避免拦截正常点击
                sidebar.addEventListener('click', function(e) {
                  // 只阻止事件冒泡，不阻止默认行为（让链接可以跳转）
                  e.stopPropagation();
                  
                  // 清除之前的定时器
                  if (sidebarClickTimeout) {
                    clearTimeout(sidebarClickTimeout);
                  }
                  
                  // 设置标志，防止图标状态更新
                  isClickingInSidebar = true;
                  
                  // 延迟重置标志（延长到1秒，确保所有状态更新都完成）
                  sidebarClickTimeout = setTimeout(function() {
                    isClickingInSidebar = false;
                    sidebarClickTimeout = null;
                  }, 1000);
                  
                  // 不阻止默认行为，让链接可以正常跳转
                }, false);
                
                sidebar.addEventListener('touchstart', function(e) {
                  // 只阻止事件冒泡，不阻止默认行为
                  e.stopPropagation();
                  
                  // 清除之前的定时器
                  if (sidebarClickTimeout) {
                    clearTimeout(sidebarClickTimeout);
                  }
                  
                  // 设置标志
                  isClickingInSidebar = true;
                  
                  sidebarClickTimeout = setTimeout(function() {
                    isClickingInSidebar = false;
                    sidebarClickTimeout = null;
                  }, 1000);
                  
                  // 不阻止默认行为，让链接可以正常工作
                }, false);
                
                sidebar.addEventListener('touchend', function(e) {
                  // 只阻止事件冒泡，不阻止默认行为
                  e.stopPropagation();
                  // 不调用 e.preventDefault()，让链接可以正常跳转
                }, false);
              }
              
              // 监听侧边栏变化（但不更新图标，因为点击侧边栏时不应该改变图标状态）
              // 移除这个 observer，因为它会在点击侧边栏链接时误触发
              // const sidebarObserver = new MutationObserver(function(mutations) {
              //   // 不再监听侧边栏变化来更新图标
              // });
              
              // 监听 body class 变化（只监听 class，避免过度触发）
              let lastCloseState = document.body.classList.contains('close');
              const bodyClassObserver = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                  if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    // 如果正在点击侧边栏，不更新图标状态
                    if (isClickingInSidebar) {
                      // 恢复之前的状态，防止状态被错误更新
                      if (lastCloseState !== document.body.classList.contains('close')) {
                        // 如果状态被改变了，恢复它
                        if (lastCloseState) {
                          document.body.classList.add('close');
                        } else {
                          document.body.classList.remove('close');
                        }
                      }
                      return;
                    }
                    
                    const currentCloseState = document.body.classList.contains('close');
                    // 只在状态真正改变时才更新图标
                    if (currentCloseState !== lastCloseState) {
                      lastCloseState = currentCloseState;
                      setTimeout(function() {
                        // 再次检查是否正在点击侧边栏
                        if (!isClickingInSidebar) {
                          updateIconDirection();
                        }
                      }, 50);
                    }
                  }
                });
              });
              bodyClassObserver.observe(document.body, {
                attributes: true,
                attributeFilter: ['class']
              });
              
              // 监听窗口resize
              window.addEventListener('resize', updateIconDirection);
              
              // 悬停效果（仅非触摸设备）
              if (window.matchMedia('(hover: hover)').matches) {
              toggleButton.addEventListener('mouseenter', function() {
                this.style.background = 'linear-gradient(135deg, #a5896b 0%, #8b6f47 100%)';
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 5px 10px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3)';
              });
              
              toggleButton.addEventListener('mouseleave', function() {
                this.style.background = 'linear-gradient(135deg, #8b6f47 0%, #573b28 100%)';
                this.style.transform = '';
                this.style.boxShadow = '0 3px 6px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2), inset 0 -1px 0 rgba(0, 0, 0, 0.2)';
              });
              }
              
              // 触摸设备：点击反馈效果（在 touchend 中处理，避免与切换逻辑冲突）
              toggleButton.addEventListener('touchstart', function(e) {
                // 只在触摸开始时改变透明度，不阻止事件
                this.style.opacity = '0.7';
              }, { passive: true });
              
              // 监听 body 的 class 变化，同步更新图标和遮罩层
              let lastBodyCloseState = document.body.classList.contains('close');
              const bodyClassObserverForUI = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                  if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                    // 如果正在点击侧边栏，不更新任何状态
                    if (isClickingInSidebar) {
                      return;
                    }
                    
                    const currentCloseState = document.body.classList.contains('close');
                    // 只在状态真正改变时才更新
                    if (currentCloseState !== lastBodyCloseState) {
                      lastBodyCloseState = currentCloseState;
                      
                      setTimeout(function() {
                        // 再次检查是否正在点击侧边栏
                        if (!isClickingInSidebar) {
                          updateIconDirection();
                          const overlay = document.getElementById('sidebar-overlay');
                          if (overlay) {
                            if (currentCloseState) {
                              overlay.classList.add('show');
                            } else {
                              overlay.classList.remove('show');
                            }
                          }
                        }
                      }, 50);
                    }
                  }
                });
              });
              
              bodyClassObserverForUI.observe(document.body, {
                attributes: true,
                attributeFilter: ['class']
              });
              
              // 初始更新
              updateIconDirection();
            }
          }
          
          hook.mounted(function() {
            setTimeout(styleToggleButton, 100);
            setTimeout(styleToggleButton, 500);
            setTimeout(styleToggleButton, 1000);
          });
          
          hook.doneEach(function() {
            setTimeout(styleToggleButton, 100);
          });
          
          // 监听DOM变化
          setTimeout(function() {
            const observer = new MutationObserver(function() {
              setTimeout(styleToggleButton, 100);
            });
            observer.observe(document.body, {
              childList: true,
              subtree: true
            });
          }, 500);
        },
        // 页脚
        function(hook, vm) {
          hook.afterEach(function(html, next) {
            var footer = [
              '<hr style="margin-top: 4rem; margin-bottom: 2rem; border-color: #464647;"/>',
              '<div style="text-align: center; color: #9d9d9d; font-size: 13px; padding: 2rem 0;">',
              '<p>MIT Licensed | Copyright © 2025-present</p>',
              '<p style="margin-top: 0.8rem;">',
              '<a href="https://github.com/WeiJinUp/daily-coding" target="_blank" style="color: #5fc698; margin: 0 1rem;">GitHub</a>',
              '<a href="https://github.com/WeiJinUp/daily-coding/issues" target="_blank" style="color: #5fc698; margin: 0 1rem;">Issues</a>',
              '</p>',
              '</div>'
            ].join('');
            next(html + footer);
          });
        },
        // 侧边栏一级类目图标
        function(hook, vm) {
          function addSidebarIcons() {
            const sidebar = document.querySelector('.sidebar-nav');
            if (!sidebar) {
              setTimeout(addSidebarIcons, 300);
              return;
            }

            // 一级类目图标映射（只匹配一级标题）
            const iconMap = {
              '介绍': 'https://stardewvalleywiki.com/mediawiki/images/1/16/Speech_bubble.png',
              '算法与数据结构': 'https://stardewvalleywiki.com/mediawiki/images/c/c2/Quests_Icon.png',
              '设计模式': 'https://stardewvalleywiki.com/mediawiki/images/a/a6/Artisan_Icon.png',
              '工程方法论': 'https://stardewvalleywiki.com/mediawiki/images/d/db/Controls_Icon.png',
              'GitHub 仓库': 'https://stardewvalleywiki.com/mediawiki/images/a/a8/Community_Center.png'
            };
            
            // 需要排除的链接文本（这些不应该有图标）
            const excludeTexts = ['关于本站', '概述', '解题技巧', '常用算法', '创建型模式', '结构型模式', '行为型模式', '业务分析', '系统设计', '问题解决', '技术决策'];

            // 查找所有p标签和一级目录链接（一级类目标题）
            const allP = sidebar.querySelectorAll('p');
            // 查找一级目录链接：直接子ul下的li下的a标签
            const allLevel1Links = sidebar.querySelectorAll('ul > li > a');
            
            // 处理p标签
            allP.forEach(function(pElement) {
              const text = pElement.textContent.trim();
              
              // 检查是否已经有图标
              if (pElement.querySelector('.sidebar-nav-icon')) return;
              
              // 跳过空文本
              if (!text) return;
              
              // 排除不需要图标的文本
              if (excludeTexts.includes(text)) return;
              
              // 只匹配一级类目标题（精确匹配）
              if (iconMap[text]) {
                // 创建图标元素
                const icon = document.createElement('span');
                icon.className = 'sidebar-nav-icon';
                icon.style.cssText = 'display:inline-block;width:20px;height:20px;margin-right:8px;vertical-align:middle;background-image:url(' + iconMap[text] + ');background-size:contain;background-repeat:no-repeat;background-position:center;image-rendering:pixelated;flex-shrink:0;';
                
                // 插入到文本前
                pElement.insertBefore(icon, pElement.firstChild);
              }
            });
            
            // 处理一级目录链接
            allLevel1Links.forEach(function(linkElement) {
              const text = linkElement.textContent.trim();
              
              // 检查是否已经有图标
              if (linkElement.querySelector('.sidebar-nav-icon')) return;
              
              // 跳过空文本
              if (!text) return;
              
              // 排除不需要图标的文本
              if (excludeTexts.includes(text)) return;
              
              // 检查是否是二级或三级目录
              const parentLi = linkElement.closest('li');
              if (parentLi) {
                const firstUl = sidebar.querySelector('ul');
                const parentUl = parentLi.closest('ul');
                
                // 如果这个链接不在顶级ul的直接子li中，说明是二级或三级目录
                if (parentUl && parentUl !== firstUl) return;
                
                // 检查这个li是否是顶级ul的直接子元素
                const isTopLevel = firstUl && firstUl.contains(parentLi) && parentLi.parentElement === firstUl;
                if (!isTopLevel && parentUl !== firstUl) return;
              }
              
              // 只匹配一级类目标题（精确匹配）
              if (iconMap[text]) {
                // 创建图标元素
                const icon = document.createElement('span');
                icon.className = 'sidebar-nav-icon';
                icon.style.cssText = 'display:inline-block;width:20px;height:20px;margin-right:8px;vertical-align:middle;background-image:url(' + iconMap[text] + ');background-size:contain;background-repeat:no-repeat;background-position:center;image-rendering:pixelated;flex-shrink:0;';
                
                // 插入到链接内容前
                if (linkElement.firstChild) {
                  linkElement.insertBefore(icon, linkElement.firstChild);
                } else {
                  linkElement.appendChild(icon);
                }
              }
            });
          }

          hook.mounted(function() {
            setTimeout(addSidebarIcons, 500);
          });
          
          hook.doneEach(function() {
            setTimeout(addSidebarIcons, 300);
            setTimeout(addSidebarIcons, 600);
          });
          
          hook.afterEach(function() {
            // 页面内容渲染后也添加图标
            setTimeout(addSidebarIcons, 200);
          });
          
          // 监听侧边栏变化，确保图标始终显示
          let observer = null;
          function startObserver() {
            const sidebar = document.querySelector('.sidebar-nav');
            if (sidebar && !observer) {
              observer = new MutationObserver(function(mutations) {
                clearTimeout(window.sidebarIconTimeout);
                window.sidebarIconTimeout = setTimeout(function() {
                  addSidebarIcons();
                }, 100);
              });
              
              observer.observe(sidebar, {
                childList: true,
                subtree: true
              });
            }
          }
          
          // 当侧边栏加载后开始监听
          setTimeout(startObserver, 1000);
          
          // 页面加载完成后也启动监听
          if (document.readyState === 'complete') {
            startObserver();
          } else {
            window.addEventListener('load', startObserver);
          }
        },
        // 正文h2标题图标
        function(hook, vm) {
          function addH2Icons() {
            const markdownSection = document.querySelector('.markdown-section');
            if (!markdownSection) {
              setTimeout(addH2Icons, 300);
              return;
            }

            // h2标题图标映射
            const h2IconMap = {
              '概述': 'https://stardewvalleywiki.com/mediawiki/images/thumb/0/09/Secret_Note_Icon.png/32px-Secret_Note_Icon.png',
              'LeetCode 题解': 'https://stardewvalleywiki.com/mediawiki/images/c/c2/Quests_Icon.png',
              '解题技巧': 'https://stardewvalleywiki.com/mediawiki/images/thumb/2/24/Achievements_Icon.png/32px-Achievements_Icon.png',
              '常用算法': 'https://stardewvalleywiki.com/mediawiki/images/thumb/a/a9/Inventory_Icon.png/32px-Inventory_Icon.png',
              '学习建议': 'https://stardewvalleywiki.com/mediawiki/images/thumb/0/0b/Forester.png/32px-Forester.png',
              '相关资源': 'https://stardewvalleywiki.com/mediawiki/images/thumb/7/70/Time_Icon.png/30px-Time_Icon.png',
              '持续更新': 'https://stardewvalleywiki.com/mediawiki/images/thumb/5/55/All_Seasons_Icon.png/32px-All_Seasons_Icon.png',
              '创建型模式': 'https://stardewvalleywiki.com/mediawiki/images/6/6f/Wizzard_tower.gif',
              '结构型模式': 'https://stardewvalleywiki.com/mediawiki/images/e/e5/Furniture_Icon.png',
              '行为型模式': 'https://stardewvalleywiki.com/mediawiki/images/b/b2/Animals_Icon.png',
              '设计原则': 'https://stardewvalleywiki.com/mediawiki/images/thumb/7/7e/Sturdy_Ring.png/32px-Sturdy_Ring.png',
              '业务分析': 'https://stardewvalleywiki.com/mediawiki/images/thumb/0/01/Bundle_Icon.png/32px-Bundle_Icon.png',
              '系统设计': 'https://stardewvalleywiki.com/mediawiki/images/thumb/0/05/Standard_Farm_Map_Icon.png/32px-Standard_Farm_Map_Icon.png',
              '问题解决': 'https://stardewvalleywiki.com/mediawiki/images/thumb/6/69/Scout.png/32px-Scout.png',
              '技术决策': 'https://stardewvalleywiki.com/mediawiki/images/thumb/4/4d/Iridium_Node.png/32px-Iridium_Node.png',
              '持续沉淀': 'https://stardewvalleywiki.com/mediawiki/images/thumb/5/54/Golden_Walnut.png/32px-Golden_Walnut.png',
              '关于本站': 'https://stardewvalleywiki.com/mediawiki/images/thumb/0/09/Secret_Note_Icon.png/32px-Secret_Note_Icon.png',
              '关于本项目': 'https://stardewvalleywiki.com/mediawiki/images/thumb/0/09/Secret_Note_Icon.png/32px-Secret_Note_Icon.png',
              '内容导航': 'https://stardewvalleywiki.com/mediawiki/images/c/c2/Quests_Icon.png',
              '技术栈': 'https://stardewvalleywiki.com/mediawiki/images/thumb/a/a9/Inventory_Icon.png/32px-Inventory_Icon.png',
              '快速开始': 'https://stardewvalleywiki.com/mediawiki/images/thumb/7/70/Time_Icon.png/30px-Time_Icon.png',
              '交流与贡献': 'https://stardewvalleywiki.com/mediawiki/images/thumb/7/7a/Multiplayer_Icon.png/32px-Multiplayer_Icon.png',
              '许可证': 'https://stardewvalleywiki.com/mediawiki/images/thumb/7/7e/Sturdy_Ring.png/32px-Sturdy_Ring.png'
            };

            // 查找所有h2标题
            const allH2 = markdownSection.querySelectorAll('h2');
            
            allH2.forEach(function(h2Element) {
              const text = h2Element.textContent.trim();
              
              // 检查是否已经有图标
              if (h2Element.querySelector('.h2-title-icon')) return;
              
              // 匹配图标
              if (h2IconMap[text]) {
                const icon = document.createElement('span');
                icon.className = 'h2-title-icon';
                icon.innerHTML = '<img src="' + h2IconMap[text] + '" alt="" />';
                h2Element.insertBefore(icon, h2Element.firstChild);
              }
            });
          }
          
          hook.mounted(function() {
            setTimeout(addH2Icons, 500);
          });
          
          hook.doneEach(function() {
            setTimeout(addH2Icons, 300);
          });
        },
        
        // 增强侧边栏子标题点击跳转功能
        function(hook, vm) {
          hook.doneEach(function() {
            setTimeout(function() {
              // 获取所有侧边栏链接
              const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
              
              sidebarLinks.forEach(function(link) {
                const href = link.getAttribute('href');
                
                // 原有的锚点处理逻辑
                const hasQueryId = href && href.includes('?id=');
                const isPureAnchor = href && href.startsWith('#') && !href.startsWith('#/');
                
                if (hasQueryId || isPureAnchor) {
                  // 需要我们处理的锚点链接
                  link.removeEventListener('click', handleAnchorLinkClick);
                  link.addEventListener('click', handleAnchorLinkClick);
                }
              });
              
              function handleAnchorLinkClick(e) {
                const href = this.getAttribute('href');
                
                let targetId = '';
                
                // 处理不同格式的锚点链接：
                // 1. Docsify 查询参数格式: #/docs/?id=xxx 或 #/docs/?id=%e5%85%b3%e4%ba%8e%e6%9c%ac%e7%ab%99
                // 2. 纯锚点: #heading-id
                
                if (href && href.includes('?id=')) {
                  // 提取 id 参数
                  const match = href.match(/[?&]id=([^&]+)/);
                  if (match && match[1]) {
                    targetId = decodeURIComponent(match[1]);
                  }
                } else if (href && href.startsWith('#') && !href.startsWith('#/')) {
                  // 纯锚点格式
                  targetId = href.substring(1);
                }
                
                if (targetId) {
                  e.preventDefault();
                  e.stopPropagation();
                  
                  // 尝试多种方式查找目标元素
                  // 1. 直接通过 ID 查找
                  let targetElement = document.getElementById(targetId);
                  
                  // 2. 如果找不到，尝试 Docsify 生成的 ID 格式（小写+连字符）
                  if (!targetElement) {
                    const docsifyId = targetId.toLowerCase().replace(/\s+/g, '-');
                    targetElement = document.getElementById(docsifyId);
                  }
                  
                  // 3. 通过 data-id 属性查找
                  if (!targetElement) {
                    targetElement = document.querySelector('[data-id="' + targetId + '"]');
                  }
                  
                  // 4. 通过文本内容模糊匹配查找标题
                  if (!targetElement) {
                    const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
                    for (let i = 0; i < headings.length; i++) {
                      const heading = headings[i];
                      const headingText = heading.textContent.trim();
                      if (headingText === targetId || headingText.includes(targetId) || targetId.includes(headingText)) {
                        targetElement = heading;
                        break;
                      }
                    }
                  }
                  
                  if (targetElement) {
                    // 平滑滚动到目标元素
                    const contentElement = document.querySelector('.content');
                    
                    if (contentElement) {
                      // 计算目标元素相对于内容区的精确位置
                      const contentRect = contentElement.getBoundingClientRect();
                      const targetRect = targetElement.getBoundingClientRect();
                      const currentScroll = contentElement.scrollTop;
                      const targetTop = currentScroll + targetRect.top - contentRect.top - 80;
                      
                      contentElement.scrollTo({
                        top: targetTop,
                        behavior: 'smooth'
                      });
                      
                      // 高亮目标元素（可选）
                      targetElement.style.transition = 'background-color 0.5s ease';
                      targetElement.style.backgroundColor = 'rgba(127, 186, 0, 0.2)';
                      setTimeout(function() {
                        targetElement.style.backgroundColor = '';
                      }, 1500);
                      
                    } else {
                      targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                      });
                    }
                  }
                }
              }
            }, 300);
          });
        },
        // 星露谷物语精灵动画初始化
        function(hook, vm) {
          hook.doneEach(function() {
            // 页面内容更新后，初始化精灵动画
            if (typeof window.initStardewSprites === 'function') {
              setTimeout(function() {
                window.initStardewSprites();
              }, 100);
            }
          });
        }
      ]
    }
  </script>
  
  <!-- 星露谷物语精灵图配置管理 -->
  <script src="_media/stardew-sprite-config.js"></script>
  
  <!-- 星露谷物语精灵动画脚本 -->
  <script src="_media/stardew-sprite-animation.js"></script>
  
  <!-- Docsify 核心 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>
  
  <!-- 搜索插件 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js"></script>
  
  <!-- 代码复制 -->
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code@2/dist/docsify-copy-code.min.js"></script>
  
  <!-- 分页 -->
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination@2/dist/docsify-pagination.min.js"></script>
  
  <!-- 代码高亮 -->
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-java.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-javascript.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-yaml.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-json.min.js"></script>
  
  <!-- Zoom 图片 -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/plugins/zoom-image.min.js"></script>

</body>
</html>
